/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/beangrind_screen/beanGrindViewBase.hpp>
#include <touchgfx/canvas_widget_renderer/CanvasWidgetRenderer.hpp>
#include <touchgfx/Color.hpp>
#include <images/BitmapDatabase.hpp>
#include <texts/TextKeysAndLanguages.hpp>

beanGrindViewBase::beanGrindViewBase() :
    updateItemCallback(this, &beanGrindViewBase::updateItemCallbackHandler),
    flexButtonCallback(this, &beanGrindViewBase::flexButtonCallbackHandler)
{
    touchgfx::CanvasWidgetRenderer::setupBuffer(canvasBuffer, CANVAS_BUFFER_SIZE);
    
    __background.setPosition(0, 0, 480, 320);
    __background.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    add(__background);

    bg.setPosition(0, 0, 480, 320);
    bg.setColor(touchgfx::Color::getColorFromRGB(32, 33, 42));
    add(bg);

    circle1.setPosition(220, 0, 260, 320);
    circle1.setCenter(260, 160);
    circle1.setRadius(260);
    circle1.setLineWidth(0);
    circle1.setArc(0, 360);
    circle1Painter.setColor(touchgfx::Color::getColorFromRGB(21, 22, 27));
    circle1.setPainter(circle1Painter);
    add(circle1);

    scrollWheel2.setPosition(240, 0, 240, 320);
    scrollWheel2.setHorizontal(false);
    scrollWheel2.setCircular(false);
    scrollWheel2.setEasingEquation(touchgfx::EasingEquations::circEaseOut);
    scrollWheel2.setSwipeAcceleration(15);
    scrollWheel2.setDragAcceleration(10);
    scrollWheel2.setNumberOfItems(2);
    scrollWheel2.setSelectedItemOffset(120);
    scrollWheel2.setOvershootPercentage(75);
    scrollWheel2.setDrawableSize(80, 0);
    scrollWheel2.setDrawables(scrollWheel2ListItems, updateItemCallback);
    scrollWheel2.animateToItem(0, 0);
    add(scrollWheel2);

    enterAuto.setIconBitmaps(Bitmap(BITMAP_ICON_THEME_IMAGES_AV_PLAY_CIRCLE_FILLED_35_35_CBC5C5_SVG_ID), Bitmap(BITMAP_ICON_THEME_IMAGES_AV_PLAY_CIRCLE_FILLED_35_35_4F4F55_SVG_ID));
    enterAuto.setIconXY(0, 0);
    enterAuto.setVisible(false);
    enterAuto.setAction(flexButtonCallback);
    enterAuto.setPosition(435, 143, 35, 35);
    add(enterAuto);

    enterManual.setIconBitmaps(Bitmap(BITMAP_ICON_THEME_IMAGES_AV_PLAY_CIRCLE_FILLED_35_35_CBC5C5_SVG_ID), Bitmap(BITMAP_ICON_THEME_IMAGES_AV_PLAY_CIRCLE_FILLED_35_35_4F4F55_SVG_ID));
    enterManual.setIconXY(0, 0);
    enterManual.setAction(flexButtonCallback);
    enterManual.setPosition(435, 143, 35, 35);
    add(enterManual);

    backToSelect.setIconBitmaps(Bitmap(BITMAP_ICON_THEME_IMAGES_NAVIGATION_CHEVRON_LEFT_35_35_CBC5C5_SVG_ID), Bitmap(BITMAP_ICON_THEME_IMAGES_NAVIGATION_CHEVRON_LEFT_35_35_4F4F55_SVG_ID));
    backToSelect.setIconXY(0, 0);
    backToSelect.setAction(flexButtonCallback);
    backToSelect.setPosition(0, 0, 35, 35);
    add(backToSelect);

    watermark.setXY(0, 308);
    watermark.setColor(touchgfx::Color::getColorFromRGB(203, 197, 197));
    watermark.setLinespacing(0);
    watermark.setTypedText(touchgfx::TypedText(T___SINGLEUSE_9BVX));
    add(watermark);

    info.setPosition(30, 40, 175, 240);
    info.setColor(touchgfx::Color::getColorFromRGB(203, 197, 197));
    info.setLinespacing(5);
    info.setWideTextAction(WIDE_TEXT_WORDWRAP);
    info.setTypedText(touchgfx::TypedText(T___SINGLEUSE_DVQF));
    add(info);
}

beanGrindViewBase::~beanGrindViewBase()
{
    touchgfx::CanvasWidgetRenderer::resetBuffer();
}

void beanGrindViewBase::setupScreen()
{
    scrollWheel2.initialize();
    for (int i = 0; i < scrollWheel2ListItems.getNumberOfDrawables(); i++)
    {
        scrollWheel2ListItems[i].initialize();
    }
}

void beanGrindViewBase::flexButtonCallbackHandler(const touchgfx::AbstractButtonContainer& src)
{
    if (&src == &backToSelect)
    {
        //backToSelectPage
        //When backToSelect clicked change screen to functionSelect
        //Go to functionSelect with no screen transition
        application().gotofunctionSelectScreenNoTransition();
    }
    if (&src == &enterManual)
    {
        //goToManual
        //When enterManual clicked change screen to grindManual
        //Go to grindManual with no screen transition
        application().gotogrindManualScreenNoTransition();
    }
    if (&src == &enterAuto)
    {
        //goToAuto
        //When enterAuto clicked change screen to grindAuto
        //Go to grindAuto with no screen transition
        application().gotogrindAutoScreenNoTransition();
    }
}

void beanGrindViewBase::updateItemCallbackHandler(touchgfx::DrawableListItemsInterface* items, int16_t containerIndex, int16_t itemIndex)
{
    if (items == &scrollWheel2ListItems)
    {
        touchgfx::Drawable* d = items->getDrawable(containerIndex);
        listElement1* cc = (listElement1*)d;
        scrollWheel2UpdateItem(*cc, itemIndex);
    }
}
